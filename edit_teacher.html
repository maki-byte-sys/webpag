<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Teacher</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
.header-section {
    background: #198754;
    color: white;
    padding: 20px;
}
.card {
    border-radius: 15px;
}
</style>
</head>
<body>

<div class="container-fluid header-section text-center">
    <h1>Enrollment System</h1>
    <p>Binalatongan Community College</p>
</div>

<div class="container mt-4">

<a href="teachers.html" class="btn btn-secondary mb-3">
    <i class="fas fa-arrow-left"></i> Back
</a>

<div class="card shadow">
<div class="card-header">
    <h3><i class="fas fa-user-edit"></i> Edit Teacher</h3>
</div>

<div class="card-body">
<form id="teacherForm">

<div class="row">

<div class="col-md-6 mb-3">
<label>First Name *</label>
<input type="text" id="firstName" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Last Name *</label>
<input type="text" id="lastName" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Email *</label>
<input type="email" id="email" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Phone *</label>
<input type="text" id="phone" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Department *</label>
<input type="text" id="department" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Specialization *</label>
<input type="text" id="specialization" class="form-control" required>
</div>

<div class="col-md-6 mb-3">
<label>Status *</label>
<select id="status" class="form-select" required>
    <option value="Active">Active</option>
    <option value="Inactive">Inactive</option>
</select>
</div>

</div>

<button type="submit" class="btn btn-success btn-lg">
    <i class="fas fa-save"></i> Save Changes
</button>

</form>
</div>
</div>

</div>

<script>
/* LOAD DATA */
const teachers = JSON.parse(localStorage.getItem("teachers")) || [];
const editTeacherId = localStorage.getItem("editTeacherId");

if (!editTeacherId) {
    alert("No teacher selected.");
    location.href = "teachers.html";
}

const teacher = teachers.find(t => t.id == editTeacherId);

if (!teacher) {
    alert("Teacher not found.");
    location.href = "teachers.html";
}

/* PREFILL FORM */
firstName.value = teacher.firstName || "";
lastName.value = teacher.lastName || "";
email.value = teacher.email || "";
phone.value = teacher.phone || "";
department.value = teacher.department || "";
specialization.value = teacher.specialization || "";
status.value = teacher.status || "Active";

/* SAVE CHANGES */
document.getElementById("teacherForm").addEventListener("submit", e => {
    e.preventDefault();

    teacher.firstName = firstName.value.trim();
    teacher.lastName = lastName.value.trim();
    teacher.email = email.value.trim();
    teacher.phone = phone.value.trim();
    teacher.department = department.value.trim();
    teacher.specialization = specialization.value.trim();
    teacher.status = status.value;

    localStorage.setItem("teachers", JSON.stringify(teachers));
    localStorage.removeItem("editTeacherId");

    alert("Teacher updated successfully!");
    location.href = "teachers.html";
});
</script>

</body>
</html>
